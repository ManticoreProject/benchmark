iters=10
while getopts ":i:" options; 
do
    case $options in
	i ) iters=$OPTARG ;;
    esac
done

if [ ! -d "results" ]; then
    mkdir results
fi

DATETIME=$( date +"%F-%H-%M-%S" )

outFile="results/times-$DATETIME.tex"

trap "exit" INT

files=("delaunay-mesh" "labyrinth" "linked-list-stm" "red-black-stm" "vacation" "kmeans-stm" "stmbench7" "sudoku-stm")

for f in "${files[@]}"
do
    echo "Processing $f"
    cd ../programs/$f
    ./benchmark -c -i $iters
    cd ../../scripts
done

./processAll > $outFile
