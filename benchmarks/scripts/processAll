


echo "\\documentclass[12pt]{article}" > times.tex
echo "\\begin{document}" >> times.tex

for f in delaunay-mesh delaunay-mesh linked-list-stm	 red-black-stm vacation
do
    cd ../programs/$f
    if [ ! -f stripped.txt ]; then
       echo "file doesn't exist for $f"
       cd ../../scripts
       continue
    fi

    echo "Processing $f"

    tfile="../../scripts/times.tex"
    
    Rscript ../../scripts/processTimes.R stripped.txt > out
    grep -o "\-\?[0-9]*\.[0-9]*\|[0-9]\+" out > out2
    rm out
    str=$(cat out2)
    str=$(echo $str)
    IFS=' ' read -a array <<< $str

    echo "\\begin{figure}[H]" >> $tfile
    echo "\\begin{tabular}{| c | c | c |}" >> $tfile
    echo "\\hline" >> $tfile
    echo "&Partial Abort  & Full Abort \\\\\\hline" >> $tfile
    echo "Execution Time & ${array[0]} & ${array[1]} \\\\\\hline" >> $tfile

    echo "Partial Aborts & ${array[3]} & - \\\\\\hline" >> $tfile
    echo "Full Aborts & ${array[4]} & ${array[6]} \\\\\\hline" >> $tfile
    echo "Total Aborts & ${array[5]} & ${array[6]} \\\\\\hline" >> $tfile
    echo "Speedup & ${array[2]} & - \\\\\\hline" >> $tfile

    echo "\\end{tabular}" >> $tfile
    echo "\\end{figure}" >> $tfile

    cd ../../scripts
done


echo "\\end{document}" >> times.tex
