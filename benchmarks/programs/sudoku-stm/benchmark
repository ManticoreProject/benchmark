#!/bin/bash

pmlc sudoku.pml
echo "" > times.txt
trap "exit" INT
echo "------------------------Partial Abort----------------------------"
for i in {1..10}
do
    echo "Iteration $i"
    res=$(./a.out  > currentTime.txt)
    while [ $? -eq "139" ]; 
    do
        echo "Error!, trying again..."
        res=$(./a.out > currentTime.txt)
    done
    cat currentTime.txt
    cat currentTime.txt >> times.txt
done

echo "------------------------Full Abort----------------------------"
for i in {1..10}
do
    echo "Iteration $i"
    res=$(./a.out -stm full > currentTime.txt)
    while [ $? -eq "139" ]; 
    do
        echo "Error!, trying again..."
        res=$(./a.out -stm full > currentTime.txt)
    done
    cat currentTime.txt
    cat currentTime.txt >> times.txt
done

grep -o '[0-9]\+\.[0-9]\+\|[0-9]\+' times.txt > stripped.txt
