#!/bin/bash

PATH_TO_SWP=$1
PATH_TO_TRUNK=$2

NAME="barnes-hut"
DESCRIPTION="purely-functional barnes hut n-body simulation (over plummer dist)"

# number of times to test each data point; for statistical validity
NUM_TRIALS="@NUM_TRIALS@"
MANTI_BENCH_ROOT=@MANTI_BENCH_ROOT@

for i in 100 1000 10000 100000 1000000; do
    ./gen-bodies.sh $i
    $PATH_TO_SWP/bin/pmlc barnes-hut-par.mlb
    $MANTI_BENCH_ROOT/scripts/experiment.sh -p @NUM_PROCS@ -f barnes-hut-par -n "$NAME-$i" -d "$DESCRIPTION over $i particles" -t $NUM_TRIALS
    $PATH_TO_TRUNKE/bin/pmlc barnes-hut-par.mlb
    $MANTI_BENCH_ROOT/scripts/experiment.sh -p @NUM_PROCS@ -f barnes-hut-par -n "$NAME-$i" -d "$DESCRIPTION over $i particles" -t $NUM_TRIALS
done