# Makefile for pmergesort benchmarks
#
# @configure_input@
#

SHELL =		/bin/sh

SMLNJ =		@SMLNJ_CMD@
MLTON =		@MLTON@
PMLC =		@PMLC@
PMLCFLAGS=@PMLCFLAGS@

TARGET =	list-mergesort

all:		$(TARGET)  $(TARGET)-smlnj $(TARGET)-mlton

$(TARGET):	list-mergesort.mlb list-mergesort.pml
	$(PMLC) $(PMLCFLAGS) -Csequential=true -o $(TARGET) list-mergesort.mlb

$(TARGET)-smlnj:	list-mergesort.cm list-mergesort.sml
	echo "SMLofNJ.exportFn(\"list-mergesort-smlnj\", Main.main);" | $(SMLNJ) list-mergesort.cm

$(TARGET)-mlton:	list-mergesort-mlton.mlb list-mergesort.pml
	$(MLTON) -output $(TARGET)-mlton list-mergesort-mlton.mlb

.PHONY: clean
clean:
	rm -rf $(TARGET) *.s  $(TARGET)-mlton .cm *.x86-linux
