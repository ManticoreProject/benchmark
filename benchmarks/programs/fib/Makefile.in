# Makefile for pfib benchmarks
#
# @configure_input@
#

SHELL =		/bin/sh

SMLNJ =		@SMLNJ_CMD@
MLTON =		@MLTON@
PMLC =		@PMLC@
PMLCFLAGS=@PMLCFLAGS@

TARGET =	pfib

all:		$(TARGET) $(TARGET)-seq-elison fib-smlnj fib-mlton

$(TARGET):	pfib.mlb pfib.pml
	$(PMLC) $(PMLCFLAGS) -o $(TARGET) pfib.mlb

$(TARGET)-seq-elison:	pfib.mlb pfib.pml
	$(PMLC) $(PMLCFLAGS) -Csequential=true -o $(TARGET)-seq-elison pfib.mlb

fib-smlnj:	fib.cm fib.sml
	echo "SMLofNJ.exportFn(\"fib-smlnj\", Main.main);" | $(SMLNJ) fib.cm

fib-mlton:	fib-mlton.mlb fib.sml
	$(MLTON) -output fib-mlton fib-mlton.mlb

.PHONY: clean
clean:
	rm -rf $(TARGET) $(TARGET)-seq-elison fib-mlton .cm *.x86-linux
