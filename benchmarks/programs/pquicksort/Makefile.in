# Makefile for pquicksort benchmarks
#
# @configure_input@
#

SHELL =		/bin/sh

SMLNJ =		@SMLNJ_CMD@
MLTON =		@MLTON@
PMLC =		@PMLC@
PMLCFLAGS =	@PMLCFLAGS@

TARGET =	pquicksort

all:		$(TARGET)-par $(TARGET)-seq-elison rope-quicksort-smlnj rope-quicksort-mlton

$(TARGET)-par:	pquicksort.mlb pquicksort.pml
	$(PMLC) $(PMLCFLAGS) -o $(TARGET)-par pquicksort.mlb

$(TARGET)-seq-elison:	pquicksort.mlb pquicksort.pml
	$(PMLC) $(PMLCFLAGS) -Csequential=true -o $(TARGET)-seq-elison pquicksort.mlb

rope-quicksort-smlnj:	rope-quicksort.cm rope-quicksort.sml
	echo "SMLofNJ.exportFn(\"rope-quicksort\", Main.main);" | $(SMLNJ) rope-quicksort.cm

rope-quicksort-mlton:  rope-quicksort-mlton.mlb rope-quicksort.sml
	$(MLTON) -output rope-quicksort-mlton rope-quicksort-mlton.mlb

.PHONY: clean
clean:
	rm -rf $(TARGET)-par $(TARGET)-seq-elison *.s rope-quicksort-mlton .cm *.x86-linux
