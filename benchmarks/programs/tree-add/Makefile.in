# Makefile for tree-add benchmarks
#
# @configure_input@
#

SHELL =		/bin/sh

SMLNJ =		@SMLNJ_CMD@
MLTON =		@MLTON@
PMLC =		@PMLC@
PMLCFLAGS=@PMLCFLAGS@

TARGET =	tree-add

all:		$(TARGET) $(TARGET)-seq-elison $(TARGET)-smlnj $(TARGET)-mlton

$(TARGET):	tree-add.mlb tree-add.pml
	$(PMLC) $(PMLCFLAGS) -o $(TARGET) tree-add.mlb

$(TARGET)-seq-elison:	tree-add.mlb tree-add.pml
	$(PMLC) $(PMLCFLAGS) -Csequential=true -o $(TARGET)-seq-elison tree-add.mlb

$(TARGET)-smlnj:	tree-add.cm tree-add.sml
	echo "SMLofNJ.exportFn(\"tree-add-smlnj\", Main.main);" | $(SMLNJ) tree-add.cm

$(TARGET)-mlton:	tree-add-mlton.mlb tree-add.sml
	$(MLTON) -output $(TARGET)-mlton tree-add-mlton.mlb

.PHONY: clean
clean:
	rm -f $(TARGET) $(TARGET)-seq-elison $(TARGET)-mlton
