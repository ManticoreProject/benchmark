# Makefile for plus-prefix benchmark
#
# @configure_input@
#

SHELL =		/bin/sh

SMLNJ =		@SMLNJ_CMD@
MLTON =		@MLTON@
PMLC =		@PMLC@
PMLCFLAGS =	@PMLCFLAGS@

TARGET =	plus-prefix

all:		$(TARGET) $(TARGET)-smlnj $(TARGET)-mlton

$(TARGET):	plus-prefix.mlb plus-prefix.pml
	$(PMLC) $(PMLCFLAGS) -Csequential=true -o $(TARGET) plus-prefix.mlb

$(TARGET)-smlnj:	plus-prefix.cm plus-prefix.sml
	echo "SMLofNJ.exportFn(\"plus-prefix-smlnj\", Main.main);" | $(SMLNJ) plus-prefix.cm

$(TARGET)-mlton:	plus-prefix-mlton.mlb plus-prefix.sml
	$(MLTON) -output $(TARGET)-mlton plus-prefix-mlton.mlb

.PHONY: clean
clean:
	rm -rf $(TARGET) $(TARGET)-mlton *.s .cm *.x86-linux
